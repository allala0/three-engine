(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>Q});const n=self.three;Number.prototype.clone=function(){return this},Number.prototype.moveTo=function(e,t){return this+(e-this)*t},n.Color.prototype.moveTo=function(e,t){var i=this.r.moveTo(e.r,t),r=this.g.moveTo(e.g,t),o=this.b.moveTo(e.b,t);return new n.Color(i,r,o)},n.Vector2.prototype.moveTo=function(e,t){var i=this,r=new n.Vector2(e.x-i.x,e.y-i.y);return new n.Vector2(i.x+r.x*t,i.y+r.y*t)},n.Vector3.prototype.moveTo=function(e,t){var i=this,r=new n.Vector3(e.x-i.x,e.y-i.y,e.z-i.z);return new n.Vector3(i.x+r.x*t,i.y+r.y*t,i.z+r.z*t)},n.Vector4.prototype.moveTo=function(e,t){var i=this,r=new n.Vector4(e.x-i.x,e.y-i.y,e.z-i.z,e.w-i.w);return new n.Vector3(i.x+r.x*t,i.y+r.y*t,i.z+r.z*t,i.w+r.w*t)},n.Euler.prototype.moveTo=function(e,t){var i=this,r=new n.Vector3(e.x-i.x,e.y-i.y,e.z-i.z);return new n.Euler(i.x+r.x*t,i.y+r.y*t,i.z+r.z*t,i.order)},n.Object3D.prototype.getSurface=function(){var e=0;return this.traverse((function(t){if(t.isMesh&&t.geometry&&t.geometry.isBufferGeometry){var i=t.geometry,r=new n.Triangle,o=i.getIndex();if(o)for(var a=0;a<o.count;a+=3)r.a.fromBufferAttribute(i.attributes.position,o.getX(a)),r.b.fromBufferAttribute(i.attributes.position,o.getX(a+1)),r.c.fromBufferAttribute(i.attributes.position,o.getX(a+2)),e+=r.getArea();else for(var s=0;s<i.attributes.position.count;s+=3)r.a.fromBufferAttribute(i.attributes.position,s),r.b.fromBufferAttribute(i.attributes.position,s+1),r.c.fromBufferAttribute(i.attributes.position,s+2),e+=r.getArea()}})),e},n.Object3D.prototype.getVolume=function(){var e=0,t=function(e,t,n){return e.dot(t.cross(n))/6};return this.traverse((function(i){if(i.isMesh&&i.geometry&&i.geometry.isBufferGeometry){var r=i.geometry,o=null!==r.index,a=r.attributes.position,s=new n.Vector3,l=new n.Vector3,c=new n.Vector3;if(o)for(var u=r.index,d=u.count/3,h=0;h<d;h++)s.fromBufferAttribute(a,u.array[3*h+0]),l.fromBufferAttribute(a,u.array[3*h+1]),c.fromBufferAttribute(a,u.array[3*h+2]),e+=Math.abs(t(s,l,c));else for(var m=a.count/3,p=0;p<m;p++)s.fromBufferAttribute(a,3*p+0),l.fromBufferAttribute(a,3*p+1),c.fromBufferAttribute(a,3*p+2),e+=Math.abs(t(s,l,c))}})),e},n.Object3D.prototype.getSize=function(){var e=new n.Box3;return e.setFromObject(this),new n.Vector3(e.max.x-e.min.x,e.max.y-e.min.y,e.max.z-e.min.z)},n.Object3D.prototype.centerGeometry=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n.Vector3;this.updateMatrix(),e=e.clone();var t=new n.Box3;t.setFromObject(this);var i=new n.Vector3;return i.x-=(t.max.x+t.min.x)/2,i.y-=(t.max.y+t.min.y)/2,i.z-=(t.max.z+t.min.z)/2,this.traverse((function(e){if(e.isMesh&&e.geometry&&e.geometry.attributes&&e.geometry.attributes.position&&e.geometry.attributes.position.array){for(var t=e.geometry.attributes.position.array,n=0;n<t.length;n+=3)t[n]+=i.x,t[n+1]+=i.y,t[n+2]+=i.z;e.geometry.computeBoundingBox(),e.geometry.computeBoundingSphere(),e.updateMatrix()}})),this.updateMatrix(),this},n.Object3D.prototype.center=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n.Vector3,t=this.parent;this.removeFromParent(),this.updateMatrix(),e=e.clone(),this.position.copy(new n.Vector3);var i=new n.Box3;return i.setFromObject(this),this.position.x+=-(i.max.x+i.min.x)/2+e.x,this.position.y+=-(i.max.y+i.min.y)/2+e.y,this.position.z+=-(i.max.z+i.min.z)/2+e.z,null!==t&&t.add(this),this.updateMatrix(),this.traverse((function(e){e.geometry&&(e.geometry.computeBoundingBox(),e.geometry.computeBoundingSphere())})),this},n.Mesh.prototype.centerGeometry=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n.Vector3;this.updateMatrix(),e=e.clone();var t=new n.Box3;t.setFromObject(this);var i=new n.Vector3;i.x-=(t.max.x+t.min.x)/2+e.x,i.y-=(t.max.y+t.min.y)/2+e.y,i.z-=(t.max.z+t.min.z)/2+e.z;for(var r=this.geometry.attributes.position.array,o=0;o<r.length;o+=3)r[o]+=i.x,r[o+1]+=i.y,r[o+2]+=i.z;return this.updateMatrix(),this},n.Object3D.prototype.normalize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";return this.setSize(1,e),this},n.Object3D.prototype.setSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";this.updateMatrix();var i=new n.Box3;i.setFromObject(this);var r=i.max[t]-i.min[t],o=e/r*this.scale[t];return this.scale.copy(new n.Vector3(o,o,o)),this.updateMatrix(),this.traverse((function(e){e.geometry&&(e.geometry.computeBoundingBox(),e.geometry.computeBoundingSphere())})),this},n.Object3D.prototype.hoverCheck=function(e,t){var i=new n.Raycaster;i.setFromCamera(e,t);var r=i.intersectObject(this);return r.length>0?this.hoverDistance=r[0].distance:this.hoverDistance=1/0,r.length>0},n.Object3D.prototype.dispose=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.disposed=!0,this.removeFromParent(),this.traverse((function(t){t.isObject3D&&(t.geometry&&t.geometry.dispose(),t.material&&(e&&t.material.map&&t.material.map.dispose(),t.material.dispose()))}))},n.Object3D.prototype.setupClickable=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.clickableObject=e,this.isClickDisabled=!1,this.isClickable=!0,this.isHovered=!1,this.isLeftClicked=!1,this.isWheelClicked=!1,this.isRightClicked=!1,this.__defineGetter__("isClicked",(function(){return this.isRightClicked||this.isLeftClicked||this.isWheelClicked})),this.isPressed=!1,this.__defineGetter__("isLeftPressed",(function(){return this.isPressed&&this.isLeftClicked})),this.__defineGetter__("isRightPressed",(function(){return this.isPressed&&this.isRightClicked})),this.__defineGetter__("isWheelPressed",(function(){return this.isPressed&&this.isWheelClicked})),this.isDragged=!1,this.__defineGetter__("isLeftDragged",(function(){return this.isDragged&&this.isLeftClicked})),this.__defineGetter__("isRightDragged",(function(){return this.isDragged&&this.isRightClicked})),this.__defineGetter__("isWheelDragged",(function(){return this.isDragged&&this.isWheelClicked})),this.hoverDistance=1/0,this._isLeftClickNeedCallback=!1,this._isRightClickNeedCallback=!1,this._isWheelClickNeedCallback=!1,this.__defineGetter__("isLeftClickNeedCallback",(function(){var e=this._isLeftClickNeedCallback;return this._isLeftClickNeedCallback=!1,e})),this.__defineGetter__("isRightClickNeedCallback",(function(){var e=this._isRightClickNeedCallback;return this._isRightClickNeedCallback=!1,e})),this.__defineGetter__("isWheelClickNeedCallback",(function(){var e=this._isWheelClickNeedCallback;return this._isWheelClickNeedCallback=!1,e})),this.__defineSetter__("isLeftClickNeedCallback",(function(e){this._isLeftClickNeedCallback=e})),this.__defineSetter__("isRightClickNeedCallback",(function(e){this._isRightClickNeedCallback=e})),this.__defineSetter__("isWheelClickNeedCallback",(function(e){this._isWheelClickNeedCallback=e})),this.onClick=function(){},this.onRightClick=function(){},this.onWheelClick=function(){},this.onHover=function(){},this.onHoverUpdate=function(){},this.onHoverEnd=function(){}},window.cursorPointer=function(){return document.body.style.cursor="pointer"},window.cursorArrow=function(){return document.body.style.cursor="default"},window.mobileCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},window.isIOS="boolean"==typeof navigator.standalone;const i=self["three/addons/postprocessing/EffectComposer.js"],r=self["three/addons/postprocessing/RenderPass.js"],o=self["three/addons/postprocessing/ShaderPass.js"],a=self["three/addons/shaders/FXAAShader.js"],s=self["three/addons/postprocessing/SMAAPass.js"];function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function d(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var p={type:"change"},f={type:"start"},b={type:"end"},y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(l,e);var t,i,r,o,a,s=(t=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=m(t);if(i){var r=m(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d(this,e)});function l(e,t){var i,r,o,a,c,u,d;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,l),(i=s.call(this)).object=e,i.domElement=t,i.domElement.style.touchAction="none",i.enabled=!0,i.target=new n.Vector3,i.minDistance=0,i.maxDistance=1/0,i.minZoom=0,i.maxZoom=1/0,i.minPolarAngle=0,i.maxPolarAngle=Math.PI,i.minAzimuthAngle=-1/0,i.maxAzimuthAngle=1/0,i.enableDamping=!1,i.dampingFactor=.05,i.enableZoom=!0,i.zoomSpeed=1,i.enableRotate=!0,i.rotateSpeed=1,i.enablePan=!0,i.panSpeed=1,i.screenSpacePanning=!0,i.keyPanSpeed=7,i.autoRotate=!1,i.autoRotateSpeed=2,i.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},i.mouseButtons={LEFT:n.MOUSE.ROTATE,MIDDLE:n.MOUSE.DOLLY,RIGHT:n.MOUSE.PAN},i.touches={ONE:n.TOUCH.ROTATE,TWO:n.TOUCH.DOLLY_PAN},i.target0=i.target.clone(),i.position0=i.object.position.clone(),i.zoom0=i.object.zoom,i._domElementKeyEvents=null,i.cursorScreen=new n.Vector3,i.cursorWorld=new n.Vector3,i.enableZoomToCursor=!1,i.adjustmentAfterZoomNeeded=!1,i.maxTargetDistanceFromOrigin=1/0,i.adjustAfterZoom=function(){var e=m.target.clone(),t=new n.Vector3(m.cursorScreen.x,m.cursorScreen.y,m.target.clone().project(m.object).z).clone().unproject(m.object),i=(new n.Vector3).subVectors(m.cursorWorld,t),r=null;if(m.screenSpacePanning)m.target.add(i),m.object.position.add(i);else{var o=new n.Plane(m.object.up.clone());if(null===(r=new n.Ray(m.object.position.clone(),(new n.Vector3).subVectors(m.target.clone().add(i),m.object.position).normalize()).intersectPlane(o,new n.Vector3))||(new n.Vector3).subVectors(m.object.position,m.target).normalize().multiply(m.object.up.clone().normalize()).length()<1e-5){m.target.add(i),m.target.length()>this.maxTargetDistanceFromOrigin&&m.target.setLength(this.maxTargetDistanceFromOrigin),m.object.position.add((new n.Vector3).subVectors(m.target,e));var a=new n.Vector3(1-m.object.up.x,1-m.object.up.y,1-m.object.up.z);m.target.multiply(a),m.object.position.multiply(a)}else r.length()>this.maxTargetDistanceFromOrigin&&r.setLength(this.maxTargetDistanceFromOrigin),m.target.copy(r),m.object.position.add((new n.Vector3).subVectors(m.target,e))}},i.setCursorWorld=function(){m.cursorWorld.copy(new n.Vector3(m.cursorScreen.x,m.cursorScreen.y,m.target.clone().project(m.object).z).unproject(m.object))},i.getPolarAngle=function(){return k.phi},i.getAzimuthalAngle=function(){return k.theta},i.getDistance=function(){return this.object.position.distanceTo(this.target)},i.listenToKeyEvents=function(e){e.addEventListener("keydown",re),this._domElementKeyEvents=e},i.saveState=function(){m.target0.copy(m.target),m.position0.copy(m.object.position),m.zoom0=m.object.zoom},i.reset=function(){m.target.copy(m.target0),m.object.position.copy(m.position0),m.object.zoom=m.zoom0,m.object.updateProjectionMatrix(),m.dispatchEvent(p),m.update(),g=y.NONE},i.update=(r=new n.Vector3,o=(new n.Quaternion).setFromUnitVectors(e.up,new n.Vector3(0,1,0)),a=o.clone().invert(),c=new n.Vector3,u=new n.Quaternion,d=2*Math.PI,function(){var e=m.object.position;r.copy(e).sub(m.target),r.applyQuaternion(o),k.setFromVector3(r),m.autoRotate&&g===y.NONE&&R(2*Math.PI/60/60*m.autoRotateSpeed),m.enableDamping?(k.theta+=w.theta*m.dampingFactor,k.phi+=w.phi*m.dampingFactor):(k.theta+=w.theta,k.phi+=w.phi);var t=m.minAzimuthAngle,i=m.maxAzimuthAngle;if(isFinite(t)&&isFinite(i)&&(t<-Math.PI?t+=d:t>Math.PI&&(t-=d),i<-Math.PI?i+=d:i>Math.PI&&(i-=d),k.theta=t<=i?Math.max(t,Math.min(i,k.theta)):k.theta>(t+i)/2?Math.max(t,k.theta):Math.min(i,k.theta)),k.phi=Math.max(m.minPolarAngle,Math.min(m.maxPolarAngle,k.phi)),k.makeSafe(),k.radius*=C,k.radius=Math.max(m.minDistance,Math.min(m.maxDistance,k.radius)),!0===m.enableDamping?m.target.addScaledVector(P,m.dampingFactor):m.target.add(P),r.setFromSpherical(k),r.applyQuaternion(a),e.copy(m.target).add(r),m.object.lookAt(m.target),!0===m.enableDamping?(w.theta*=1-m.dampingFactor,w.phi*=1-m.dampingFactor,P.multiplyScalar(1-m.dampingFactor)):(w.set(0,0,0),P.set(0,0,0)),C=1,m.target.length()>this.maxTargetDistanceFromOrigin){var s=m.target.clone();m.target.setLength(this.maxTargetDistanceFromOrigin),m.object.position.add((new n.Vector3).subVectors(m.target,s))}return!!(O||c.distanceToSquared(m.object.position)>v||8*(1-u.dot(m.object.quaternion))>v)&&(m.dispatchEvent(p),m.enableZoomToCursor&&m.adjustmentAfterZoomNeeded&&(m.adjustmentAfterZoomNeeded=!1,this.adjustAfterZoom()),c.copy(m.object.position),u.copy(m.object.quaternion),O=!1,!0)}),i.dispose=function(){m.domElement.removeEventListener("contextmenu",oe),m.domElement.removeEventListener("pointerdown",J),m.domElement.removeEventListener("pointercancel",ne),m.domElement.removeEventListener("wheel",ie),m.domElement.removeEventListener("pointermove",ee),m.domElement.removeEventListener("pointerup",te),null!==m._domElementKeyEvents&&m._domElementKeyEvents.removeEventListener("keydown",re)};var m=h(i),y={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},g=y.NONE,v=1e-6,k=new n.Spherical,w=new n.Spherical,C=1,P=new n.Vector3,O=!1,E=new n.Vector2,x=new n.Vector2,j=new n.Vector2,S=new n.Vector2,T=new n.Vector2,_=new n.Vector2,L=new n.Vector2,M=new n.Vector2,A=new n.Vector2,D=[],V={};function z(){return Math.pow(.95,m.zoomSpeed)}function R(e){w.theta-=e}function F(e){w.phi-=e}var N,I=(N=new n.Vector3,function(e,t){N.setFromMatrixColumn(t,0),N.multiplyScalar(-e),P.add(N)}),B=function(){var e=new n.Vector3;return function(t,n){!0===m.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(m.object.up,e)),e.multiplyScalar(t),P.add(e)}}(),H=function(){var e=new n.Vector3;return function(t,n){var i=m.domElement;if(m.object.isPerspectiveCamera){var r=m.object.position;e.copy(r).sub(m.target);var o=e.length();o*=Math.tan(m.object.fov/2*Math.PI/180),I(2*t*o/i.clientHeight,m.object.matrix),B(2*n*o/i.clientHeight,m.object.matrix)}else m.object.isOrthographicCamera?(I(t*(m.object.right-m.object.left)/m.object.zoom/i.clientWidth,m.object.matrix),B(n*(m.object.top-m.object.bottom)/m.object.zoom/i.clientHeight,m.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),m.enablePan=!1)}}();function U(e){m.enableZoomToCursor&&m.setCursorWorld(),m.object.isPerspectiveCamera?C/=e:m.object.isOrthographicCamera?(m.object.zoom=Math.max(m.minZoom,Math.min(m.maxZoom,m.object.zoom*e)),m.object.updateProjectionMatrix(),O=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),m.enableZoom=!1),m.enableZoomToCursor&&(m.object.isOrthographicCamera?m.adjustAfterZoom():m.object.isPerspectiveCamera&&(m.adjustmentAfterZoomNeeded=!0))}function W(e){m.enableZoomToCursor&&m.setCursorWorld(),m.object.isPerspectiveCamera?C*=e:m.object.isOrthographicCamera?(m.object.zoom=Math.max(m.minZoom,Math.min(m.maxZoom,m.object.zoom/e)),m.object.updateProjectionMatrix(),O=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),m.enableZoom=!1),m.enableZoomToCursor&&(m.object.isOrthographicCamera?m.adjustAfterZoom():m.object.isPerspectiveCamera&&(m.adjustmentAfterZoomNeeded=!0))}function Z(e){E.set(e.clientX,e.clientY)}function G(e){S.set(e.clientX,e.clientY)}function Y(){if(1===D.length)E.set(D[0].pageX,D[0].pageY);else{var e=.5*(D[0].pageX+D[1].pageX),t=.5*(D[0].pageY+D[1].pageY);E.set(e,t)}}function X(){if(1===D.length)S.set(D[0].pageX,D[0].pageY);else{var e=.5*(D[0].pageX+D[1].pageX),t=.5*(D[0].pageY+D[1].pageY);S.set(e,t)}}function q(){var e=D[0].pageX-D[1].pageX,t=D[0].pageY-D[1].pageY,n=Math.sqrt(e*e+t*t);L.set(0,n)}function K(e){if(1==D.length)x.set(e.pageX,e.pageY);else{var t=le(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);x.set(n,i)}j.subVectors(x,E).multiplyScalar(m.rotateSpeed);var r=m.domElement;R(2*Math.PI*j.x/r.clientHeight),F(2*Math.PI*j.y/r.clientHeight),E.copy(x)}function Q(e){if(1===D.length)T.set(e.pageX,e.pageY);else{var t=le(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);T.set(n,i)}_.subVectors(T,S).multiplyScalar(m.panSpeed),H(_.x,_.y),S.copy(T)}function $(e){var t=le(e),n=e.pageX-t.x,i=e.pageY-t.y,r=Math.sqrt(n*n+i*i);M.set(0,r),A.set(0,Math.pow(M.y/L.y,m.zoomSpeed)),U(A.y),L.copy(M)}function J(e){!1!==m.enabled&&(0===D.length&&(m.domElement.setPointerCapture(e.pointerId),m.domElement.addEventListener("pointermove",ee),m.domElement.addEventListener("pointerup",te)),function(e){D.push(e)}(e),"touch"===e.pointerType?function(e){switch(se(e),D.length){case 1:switch(m.touches.ONE){case n.TOUCH.ROTATE:if(!1===m.enableRotate)return;Y(),g=y.TOUCH_ROTATE;break;case n.TOUCH.PAN:if(!1===m.enablePan)return;X(),g=y.TOUCH_PAN;break;default:g=y.NONE}break;case 2:switch(m.touches.TWO){case n.TOUCH.DOLLY_PAN:if(!1===m.enableZoom&&!1===m.enablePan)return;m.enableZoom&&q(),m.enablePan&&X(),g=y.TOUCH_DOLLY_PAN;break;case n.TOUCH.DOLLY_ROTATE:if(!1===m.enableZoom&&!1===m.enableRotate)return;m.enableZoom&&q(),m.enableRotate&&Y(),g=y.TOUCH_DOLLY_ROTATE;break;default:g=y.NONE}break;default:g=y.NONE}g!==y.NONE&&m.dispatchEvent(f)}(e):function(e){var t;switch(e.button){case 0:t=m.mouseButtons.LEFT;break;case 1:t=m.mouseButtons.MIDDLE;break;case 2:t=m.mouseButtons.RIGHT;break;default:t=-1}switch(t){case n.MOUSE.DOLLY:if(!1===m.enableZoom)return;!function(e){L.set(e.clientX,e.clientY)}(e),g=y.DOLLY;break;case n.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===m.enablePan)return;G(e),g=y.PAN}else{if(!1===m.enableRotate)return;Z(e),g=y.ROTATE}break;case n.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===m.enableRotate)return;Z(e),g=y.ROTATE}else{if(!1===m.enablePan)return;G(e),g=y.PAN}break;default:g=y.NONE}g!==y.NONE&&m.dispatchEvent(f)}(e))}function ee(e){!1!==m.enabled&&("touch"===e.pointerType?function(e){switch(se(e),g){case y.TOUCH_ROTATE:if(!1===m.enableRotate)return;K(e),m.update();break;case y.TOUCH_PAN:if(!1===m.enablePan)return;Q(e),m.update();break;case y.TOUCH_DOLLY_PAN:if(!1===m.enableZoom&&!1===m.enablePan)return;!function(e){m.enableZoom&&$(e),m.enablePan&&Q(e)}(e),m.update();break;case y.TOUCH_DOLLY_ROTATE:if(!1===m.enableZoom&&!1===m.enableRotate)return;!function(e){m.enableZoom&&$(e),m.enableRotate&&K(e)}(e),m.update();break;default:g=y.NONE}}(e):function(e){switch(g){case y.ROTATE:if(!1===m.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),j.subVectors(x,E).multiplyScalar(m.rotateSpeed);var t=m.domElement;R(2*Math.PI*j.x/t.clientHeight),F(2*Math.PI*j.y/t.clientHeight),E.copy(x),m.update()}(e);break;case y.DOLLY:if(!1===m.enableZoom)return;!function(e){M.set(e.clientX,e.clientY),A.subVectors(M,L),A.y>0?U(z()):A.y<0&&W(z()),L.copy(M),m.update()}(e);break;case y.PAN:if(!1===m.enablePan)return;!function(e){T.set(e.clientX,e.clientY),_.subVectors(T,S).multiplyScalar(m.panSpeed),H(_.x,_.y),S.copy(T),m.update()}(e)}}(e))}function te(e){ae(e),0===D.length&&(m.domElement.releasePointerCapture(e.pointerId),m.domElement.removeEventListener("pointermove",ee),m.domElement.removeEventListener("pointerup",te)),m.dispatchEvent(b),g=y.NONE}function ne(e){ae(e)}function ie(e){!1!==m.enabled&&!1!==m.enableZoom&&g===y.NONE&&(e.preventDefault(),m.dispatchEvent(f),function(e){e.deltaY<0?W(z()):e.deltaY>0&&U(z()),m.update()}(e),m.dispatchEvent(b))}function re(e){!1!==m.enabled&&!1!==m.enablePan&&function(e){var t=!1;switch(e.code){case m.keys.UP:H(0,m.keyPanSpeed),t=!0;break;case m.keys.BOTTOM:H(0,-m.keyPanSpeed),t=!0;break;case m.keys.LEFT:H(m.keyPanSpeed,0),t=!0;break;case m.keys.RIGHT:H(-m.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),m.update())}(e)}function oe(e){!1!==m.enabled&&e.preventDefault()}function ae(e){delete V[e.pointerId];for(var t=0;t<D.length;t++)if(D[t].pointerId==e.pointerId)return void D.splice(t,1)}function se(e){var t=V[e.pointerId];void 0===t&&(t=new n.Vector2,V[e.pointerId]=t),t.set(e.pageX,e.pageY)}function le(e){var t=e.pointerId===D[0].pointerId?D[1]:D[0];return V[t.pointerId]}m.domElement.addEventListener("contextmenu",oe),m.domElement.addEventListener("pointerdown",J),m.domElement.addEventListener("pointercancel",ne),m.domElement.addEventListener("wheel",ie,{passive:!1}),m.domElement.addEventListener("mousemove",(function(e){m.enableZoomToCursor&&m.cursorScreen.copy(new n.Vector3((e.clientX-m.domElement.getBoundingClientRect().left)/m.domElement.clientWidth*2-1,-(e.clientY-m.domElement.getBoundingClientRect().top)/m.domElement.clientHeight*2+1,m.target.clone().project(m.object).z))}));var ce=function(e){var t,i=e.touches;1===i.length?t=new n.Vector2(i[0].clientX,i[0].clientY):2===i.length&&(t=new n.Vector2((i[0].clientX+i[1].clientX)/2,(i[0].clientY+i[1].clientY)/2)),void 0!==t&&m.cursorScreen.copy(new n.Vector3((t.x-m.domElement.getBoundingClientRect().left)/m.domElement.clientWidth*2-1,-(t.y-m.domElement.getBoundingClientRect().top)/m.domElement.clientHeight*2+1,m.target.clone().project(m.object).z))};return m.domElement.addEventListener("touchstart",ce),m.domElement.addEventListener("touchmove",ce),i.update(),i}return r=l,o&&c(r.prototype,o),a&&c(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r}(n.EventDispatcher);const g=self["three/addons/controls/TrackballControls.js"],v=self["three/addons/controls/PointerLockControls.js"],k=self["three/addons/controls/ArcballControls.js"],w=self["three/addons/libs/lil-gui.module.min.js"],C=self["three/addons/libs/stats.module.js"],P=self["three/addons/capabilities/WebGL.js"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const _=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S(this,e),this.isTransition=!0,this.transitionObjects=Array.isArray(t)?t:[t],this.parameters=n,this.init()}var t,i;return t=e,i=[{key:"init",value:function(){this.autoplay=void 0!==this.parameters.autoplay&&this.parameters.autoplay,this.duration=void 0!==this.parameters.duration?this.parameters.duration:.5,this.count=void 0!==this.parameters.count?this.parameters.count:1,this.delay=void 0!==this.parameters.delay?this.parameters.delay:0,this.forwards=void 0===this.parameters.forwards||this.parameters.forwards,this.callback=void 0!==this.parameters.callback?this.parameters.callback:null,this.callbackEveryIteration=void 0!==this.parameters.callbackEveryIteration?this.parameters.callbackEveryIteration:null,this.callbackEveryUpdate=void 0!==this.parameters.callbackEveryUpdate?this.parameters.callbackEveryUpdate:null,this.function=this.parameters.function,this.useFunctionSeparately=this.parameters.useFunctionSeparately;var e,t=x(this.transitionObjects);try{for(t.s();!(e=t.n()).done;){var i=e.value;void 0===i.parameters.function&&void 0!==this.function&&(i.function=this.function),void 0===i.parameters.useFunctionSeparately&&void 0!==this.useFunctionSeparately&&(i.useFunctionSeparately=this.useFunctionSeparately)}}catch(e){t.e(e)}finally{t.f()}return this.counter=0,this.progress=0,this.paused=!0,this.ended=!1,this.isPlayRequested=!1,this.clock=new n.Clock,this.autoplay&&this.play(),this}},{key:"setStartTime",value:function(){this.startTime=this.clock.getElapsedTime()+this.delay}},{key:"setTransitionObjectValue",value:function(e,t){isNaN(e.object[e.property])?e.object[e.property].copy(t):e.object[e.property]=t}},{key:"setTransitionObjectsValueFromStartState",value:function(){var e,t=x(this.transitionObjects);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.setTransitionObjectValue(n,n.keyframesSorted[0].value)}}catch(e){t.e(e)}finally{t.f()}}},{key:"setTransitionObjectsValueFromEndState",value:function(){var e,t=x(this.transitionObjects);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.setTransitionObjectValue(n,n.keyframesSorted[n.keyframesSorted.length-1].value)}}catch(e){t.e(e)}finally{t.f()}}},{key:"setTransitionObjectsValueFromProgress",value:function(){var e,t=x(this.transitionObjects);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.setTransitionObjectValue(n,n.getCurrentValue(this.progress))}}catch(e){t.e(e)}finally{t.f()}}},{key:"setTransitionObjectsValue",value:function(e){var t,n=x(this.transitionObjects);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.setTransitionObjectValue(i,e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"updateStartState",value:function(){var e,t=x(this.transitionObjects);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.enableDynamicStartState&&(n.keyframesSorted[0].value=n.object[n.property].clone())}}catch(e){t.e(e)}finally{t.f()}return this}},{key:"moveToStartState",value:function(){return this.setTransitionObjectsValueFromStartState(),this}},{key:"clone",value:function(){var t,n=[],i=x(this.transitionObjects);try{for(i.s();!(t=i.n()).done;){var r=t.value;n.push(r.clone())}}catch(e){i.e(e)}finally{i.f()}var o=new e(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.parameters));return o.progress=this.progress,o.counter=this.counter,o.paused=this.paused,o.ended=this.ended,o}},{key:"reset",value:function(){return this.progress=0,this.counter=0,this.ended=!1,this.lastUpdate=null,this.delayStart=null,this.moveToStartState(),this.isPlayRequested=!this.paused,this}},{key:"skip",value:function(){this.progress=1,this.setTransitionObjectsValueFromEndState(),this.counter=this.count,this.ended=this.paused=!0}},{key:"play",value:function(){this.paused=!1,this.isPlayRequested=!0}},{key:"pause",value:function(){this.paused=!0}},{key:"toggle",value:function(){this.paused?this.play():this.pause()}},{key:"update",value:function(){this.ended||this.paused||(this.isPlayRequested&&(this.isPlayRequested=!1,this.delayStart||(this.delayStart=this.clock.getElapsedTime()),this.startTime=Math.max(this.delayStart-this.clock.getElapsedTime()+this.delay,0)+this.clock.getElapsedTime()-this.progress*this.duration),this.clock.getElapsedTime()<this.startTime||(this.progress=Math.max(Math.min((this.clock.getElapsedTime()-this.startTime)/this.duration,1),0),this.progress>=1&&!this.ended&&(++this.counter<this.count?(this.setTransitionObjectsValueFromStartState(),this.startTime=this.clock.getElapsedTime(),this.progress=0):(this.forwards?this.setTransitionObjectsValueFromEndState():this.setTransitionObjectsValueFromStartState(),this.ended=this.paused=!0),this.callbackEveryIteration&&this.callbackEveryIteration(this),this.ended&&this.callback&&this.callback(this)),this.setTransitionObjectsValueFromProgress(),this.callbackEveryUpdate&&this.callbackEveryUpdate(this),this.lastUpdate=this.clock.getElapsedTime()))}}],i&&T(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=M(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function M(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const z=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};D(this,e),this.object=t,this.property=n,this.keyframes=i,this.parameters=r,this.function=void 0!==r.function?r.function:function(e){return e},this.useFunctionSeparately=void 0!==r.useFunctionSeparately&&r.useFunctionSeparately,this.enableDynamicStartState=void 0===r.enableDynamicStartState||r.enableDynamicStartState,void 0===this.keyframes[0]&&(this.keyframes[0]=this.object[this.property].clone()),this.sortKeyframes(),void 0===this.keyframes[1]&&(this.keyframesSorted.length>0?this.keyframes[1]=this.keyframesSorted[this.keyframesSorted.length-1].value:this.keyframes[1]=this.object[this.property].clone(),this.sortKeyframes())}var t,n;return t=e,(n=[{key:"sortKeyframes",value:function(){this.keyframesSorted=[];for(var e=0,t=Object.entries(this.keyframes);e<t.length;e++){var n=(o=t[e],a=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(o,a)||M(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],r=n[1];this.keyframesSorted.push({progress:i,value:r})}var o,a;this.keyframesSorted.sort((function(e,t){return e.progress-t.progress}))}},{key:"getCurrentStartKeyframe",value:function(e){var t,n=this.keyframesSorted[0],i=L(this.keyframesSorted);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(r.progress>e)break;n=r}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"getCurrentEndKeyframe",value:function(e){var t,n=L(this.keyframesSorted);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.progress>e)return i}}catch(e){n.e(e)}finally{n.f()}return this.keyframesSorted[this.keyframesSorted.length-1]}},{key:"getCurrentKeyframeProgress",value:function(e){var t=this.getCurrentStartKeyframe(e).progress,n=this.getCurrentEndKeyframe(e).progress-t;return(e-t)/(0===n?1:n)}},{key:"getCurrentValue",value:function(e){var t=this.useFunctionSeparately?e:this.function(e),n=this.getCurrentKeyframeProgress(t),i=this.useFunctionSeparately?this.function(n):n;return this.getCurrentStartKeyframe(t).value.moveTo(this.getCurrentEndKeyframe(t).value,i)}},{key:"clone",value:function(){return new e(this.object,this.property,this.keyframes,this.parameters)}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var R;function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}const I=(F(R={linear:function(e){return e},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-Math.pow(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-Math.pow(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-Math.pow(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2},easeInCirc:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2},easeInBack:function(e){return 2.70158*e*e*e-1.70158*e*e},easeOutBack:function(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)},easeInOutBack:function(e){var t=2.5949095;return e<.5?Math.pow(2*e,2)*(7.189819*e-t)/2:(Math.pow(2*e-2,2)*((t+1)*(2*e-2)+t)+2)/2},easeInElastic:function(e){var t=2*Math.PI/3;return 0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*t)},easeOutElastic:function(e){var t=2*Math.PI/3;return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*t)+1},easeInOutElastic:function(e){var t=2*Math.PI/4.5;return 0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*t)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*t)/2+1},easeInBounce:function(e){!function(e){var t=2.75;e<1/t||(e-=e<2/t?1.5/t:e<2.5/t?2.25/t:2.625/t)}(1-e)},easeOutBounce:function(e){return N(e)}},"easeInBounce",(function(e){return 1-N(1-e)})),F(R,"easeInOutBounce",(function(e){return e<.5?(1-N(1-2*e))/2:(1+N(2*e-1))/2})),R);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Z(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function q(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var K=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Y(this,e),this.parameters=t,P.isWebGLAvailable()){this.loadCss(),this.setupDomElement(),this.setParameter("DEV_MODE",!1),this.setParameter("enableControls",this.DEV_MODE),this.setParameter("controlsEnabled",!0),this.setParameter("enableStats",this.DEV_MODE),this.setParameter("enableGui",this.DEV_MODE),this.setParameter("disableContextMenu",!1),this.setParameter("enablePostprocessing",!1),this.setParameter("enableLoadingBar",!1),this.setParameter("enableLoadingCircle",!1),this.setParameter("cameraType","perspective"),this.setParameter("controlsType","orbit"),this.setParameter("enableControlsPan",!1),this.setParameter("enableControlsDamping",!0),this.setParameter("enableOrbitControlsZoomToCursor",!1),this.setParameter("enableTestLights",!1),this.setParameter("enableShadows",!1),this.setParameter("enableAlpha",!1),this.setParameter("enableAntialias",!1),this.setParameter("enableAutoFullscreenOnMobile",!1),this.setParameter("backgroundColor",void 0),this.setParameter("enableFXAA",!1),this.setParameter("enableSMAA",!1),this.setParameter("cameraPosition",new n.Vector3(1,1,1)),this.setParameter("cameraLookAt",new n.Vector3(0,0,0)),this.setParameter("cameraUp",n.Object3D.DefaultUp.clone()),this.setParameter("cameraZoom",1),this.setParameter("perspectiveCameraFov",30),this.setParameter("perspectiveCameraNear",.01),this.setParameter("perspectiveCameraFar",1e3),this.setParameter("orthographicCameraMinWidth",1),this.setParameter("orthographicCameraMinHeight",1),this.setParameter("orthographicCameraNear",-1e3),this.setParameter("orthographicCameraFar",1e3),this.setParameter("cameraTransitionDuration",1.5),this.setParameter("cameraTransitionFunction",I.easeInOutQuad),this.setParameter("enableSRGBEncoding",!1),this.setParameter("assets",{},this.parameters),this.setParameter("objectsToUpdate",[],this.parameters);for(var i=0,r=Object.entries(this.parameters.callbacks||{});i<r.length;i++){var o=W(r[i],2),a=o[0],s=o[1];e.prototype[a]=s}this.loaded=!1,this.inited=!1,this.initedLoaded=!1,this.renderInited=!1,this.isMouseDown=!1,this.lastTouch=null,this._cameraUp=this.cameraUp.clone(),this._cameraLookAt=this.cameraLookAt.clone(),this._cameraPosition=this.cameraPosition.clone(),this._cameraZoom=this.cameraZoom.clone(),this.cameraTransition=null,this.clock=new n.Clock,this.mouse=new n.Vector2(1,1),this.raycaster=new n.Raycaster,this.scene=new n.Scene,this.enableLoadingCircle&&this.addLoadingCircle(),this.enableLoadingBar&&this.addLoadingBar(),this.addRenderer(),this.addCamera(),this.addEventListeners(),this.enableControls&&this.addControls(),this.enableStats&&this.addStats(),this.enableGui&&this.addGui(),this.enablePostprocessing&&this.addPostProcessing(),this.enableTestLights&&this.addTestLights(),this.init&&(this.init(this),this.inited=!0),this.GameLoop()}else{var l="WebGL is not supported by your browser";alert(l)}}return q(e,[{key:"setParameter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.parameters.setup;this[e]=void 0!==n&&void 0!==n[e]?n[e]:t}},{key:"loadCss",value:function(){var e=document.createElement("style");e.innerHTML='\n:root{ \n  --DPR: 1;\n}\n\n.loadingCircle{\n  --size: calc(min(20vh, 20vw) / var(--DPR));\n  --border-width: calc(min(2vh, 2vw) / var(--DPR));\n\n  border: 10px solid #777777;\n  border-top: 10px solid #fff;\n  border-width: var(--border-width);\n  border-radius: 50%;\n  width: var(--size);\n  height: var(--size);\n  /* padding-top: var(--size); */\n  animation: loadingSpin 1s linear infinite;\n  position: absolute;\n  left: calc(50% - var(--size) / 2 - var(--border-width));\n  top: calc(50% - var(--size) / 2 - var(--border-width));\n  /* box-sizing: border-box; */\n  z-index: 50001;\n}\n\n.loadingBar{\n  width: 60vw;\n  height: 4vw;\n  left: calc(50vw - 60vw / 2);\n  top: calc(50vh - 4vw / 2);\n  position: absolute;\n  border: 3px solid white;\n  border-width: calc(3px / var(--DPR));\n  box-sizing: border-box;\n}\n\n.loadingBarProgress{\n  background-color: white;\n  height: 100%;\n}\n\n.loadingScreen{\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  position: absolute;\n  background-color: #000;\n  z-index: 50000;\n}\n\n.hidden{\n  display: none;\n}\n\n@keyframes loadingSpin{\n  0%{ transform: rotate(0deg); }\n  100%{ transform: rotate(360deg); }\n}\n\n*:focus{\n  outline: none;\n}\n  \n::-moz-selection{background: rgba(0,0,0,0);}\n::selection{background: rgba(0,0,0,0);}\n::-webkit-selection{background: rgba(0,0,0,0);}\n:not(input){\n  -webkit-tap-highlight-color:  rgba(0,0,0,0); \n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n  \n::-webkit-scrollbar{\n  width: calc(10px / var(--DPR));\n  background-color: transparent;\n}\n::-webkit-scrollbar-track {\n  background-color: white;\n\n}\n::-webkit-scrollbar-thumb{\n  background-color: #aaa;\n  border-radius: calc(5px / var(--DPR));\n}\n::-webkit-scrollbar-thumb:hover{\n  background-color: #ccc;\n}\n  \ninput[type=number]::-webkit-inner-spin-button,\ninput[type=number]::-webkit-outer-spin-button{\n  -webkit-appearance: none; \n  margin: 0; \n  width: 0;\n  height: 0;\n  opacity: 0\n}\n  \ninput[type=number]{ \n  appearance: textfield;\n  margin: 0; \n}\n\ninput[type="number"]{\n  appearance: none;\n}\n\ninput[type="number"]:focus, \ninput[type="number"]:hover{\n  appearance: auto;\n}\n\ninput::-webkit-outer-spin-button, input::-webkit-inner-spin-button{\n  -webkit-appearance: none !important;\n}\n\ninput[type="number"]{\n  -moz-appearance: textfield;\n}\n',document.getElementsByTagName("head")[0].appendChild(e)}},{key:"setupDomElement",value:function(){this.setParameter("domContainer",document.body),this.domElement=document.createElement("div"),this.domElement.id="scene",this.domElement.style.width="100%",this.domElement.style.height="100%",this.domElement.style.position="relative",this.domElement.style.left=0,this.domElement.style.top=0,this.domContainer.appendChild(this.domElement),this.domElement.size=new n.Vector2(this.domElement.clientWidth,this.domElement.clientHeight)}},{key:"addLoadingBar",value:function(){void 0===this.loadingScreen&&(this.loadingScreen=document.createElement("div"),this.loadingScreen.classList.add("loadingScreen")),this.loadingBar=document.createElement("div"),this.loadingBar.classList.add("loadingBar"),this.loadingBarProgress=document.createElement("div"),this.loadingBarProgress.classList.add("loadingBarProgress"),this.loadingBar.appendChild(this.loadingBarProgress),this.loadingScreen.appendChild(this.loadingBar),this.domElement.appendChild(this.loadingScreen)}},{key:"setLoadingBarVisibility",value:function(e){e?this.loadingScreen.classList.remove("hidden"):this.loadingScreen.classList.add("hidden")}},{key:"setLoadingBarProgress",value:function(e){this.loadingBarProgress.style.width=100*e+"%"}},{key:"addLoadingCircle",value:function(){void 0===this.loadingScreen&&(this.loadingScreen=document.createElement("div"),this.loadingScreen.classList.add("loadingScreen")),this.loadingCircle=document.createElement("div"),this.loadingCircle.classList.add("loadingCircle"),this.loadingScreen.appendChild(this.loadingCircle),this.domElement.appendChild(this.loadingScreen)}},{key:"setLoadingCircleVisibility",value:function(e){e?this.loadingScreen.classList.remove("hidden"):this.loadingScreen.classList.add("hidden")}},{key:"addPostProcessing",value:function(){this.composer=new i.EffectComposer(this.renderer),this.renderPass=new r.RenderPass(this.scene,this.camera),this.composer.addPass(this.renderPass),this.enableFXAA&&(this.fxaaPass=new o.ShaderPass(a.FXAAShader),this.composer.addPass(this.fxaaPass)),this.enableSMAA&&(this.smaaPass=new s.SMAAPass(this.domElement.clientWidth*this.renderer.getPixelRatio(),this.domElement.clientHeight*this.renderer.getPixelRatio()),this.composer.addPass(this.smaaPass))}},{key:"updateFxaaPass",value:function(){var e=this.renderer.getPixelRatio(),t=this.fxaaPass.material.uniforms;t.resolution.value.x=1/Math.ceil(this.domElement.clientWidth*e),t.resolution.value.y=1/Math.ceil(this.domElement.clientHeight*e)}},{key:"addRenderer",value:function(){this.renderer=new n.WebGLRenderer({alpha:this.enableAlpha,antialias:this.enableAntialias}),this.enableShadows&&(this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=n.PCFSoftShadowMap),this.renderer.setSize(this.domElement.clientWidth,this.domElement.clientHeight),this.backgroundColor&&this.renderer.setClearColor(this.backgroundColor),this.enableSRGBEncoding&&(this.renderer.outputEncoding=n.sRGBEncoding),this.domElement.appendChild(this.renderer.domElement)}},{key:"addCamera",value:function(){if("perspective"===this.cameraType)this.addPerspectiveCamera();else{if("orthographic"!==this.cameraType)return;this.addOrthographicCamera()}this.setCameraPosition()}},{key:"addPerspectiveCamera",value:function(){this.camera=new n.PerspectiveCamera(this.perspectiveCameraFov,this.domElement.clientWidth/this.domElement.clientHeight,this.perspectiveCameraNear,this.perspectiveCameraFar)}},{key:"calculateOrtographicCameraSize",value:function(){var e=new n.Vector2(this.domElement.clientWidth,this.domElement.clientHeight);return this.orthographicCameraMinWidth/this.orthographicCameraMinHeight>e.x/e.y?new n.Vector2(this.orthographicCameraMinWidth,this.orthographicCameraMinWidth/e.x*e.y):new n.Vector2(this.orthographicCameraMinHeight*e.x/e.y,this.orthographicCameraMinHeight)}},{key:"addOrthographicCamera",value:function(){var e=this.calculateOrtographicCameraSize();this.camera=new n.OrthographicCamera(e.x/-2,e.x/2,e.y/2,e.y/-2,this.orthographicCameraNear,this.orthographicCameraFar)}},{key:"addControls",value:function(){"orbit"===this.controlsType?this.addOrbitControls():"trackball"===this.controlsType?this.addTrackballControls():"pointerlock"===this.controlsType?this.addPointerLockControls():"arcball"===this.controlsType&&this.addArcballControls(),this.controls.enabled=this.controlsEnabled}},{key:"addTrackballControls",value:function(){this.controls=new g.TrackballControls(this.camera,this.renderer.domElement),this.controls.staticMoving=!this.enableControlsDamping,this.controls.noPan=!this.enableControlsPan,this.controls.rotateSpeed=3.5,this.controls.panSpeed=.2,this.controls.dynamicDampingFactor=.1,this.controls.target.copy(this.cameraLookAt)}},{key:"addOrbitControls",value:function(){this.controls=new y(this.camera,this.renderer.domElement),this.controls.enableDamping=this.enableControlsDamping,this.controls.enablePan=this.enableControlsPan,this.controls.enableZoomToCursor=this.enableOrbitControlsZoomToCursor,this.controls.target.copy(this.cameraLookAt)}},{key:"addPointerLockControls",value:function(){this.controls=new v.PointerLockControls(this.camera,this.renderer.domElement)}},{key:"addArcballControls",value:function(){this.controls=new k.ArcballControls(this.camera,this.renderer.domElement)}},{key:"addStats",value:function(){this.stats=new C,this.stats.showPanel(0),this.stats.dom.style.position="absolute",this.domElement.appendChild(this.stats.dom)}},{key:"addGui",value:function(){this.gui=new w.GUI({autoPlace:!1}),this.gui.close(),this.gui.domElement.style.position="absolute",this.gui.domElement.style.right=0,this.gui.domElement.style.top=0,this.domElement.appendChild(this.gui.domElement)}},{key:"assetsLoadedCheck",value:function(){var e=!0,t=Object.entries(this.assets).length,n=0;if(this.assets)for(var i=0,r=Object.entries(this.assets);i<r.length;i++){var o=W(r[i],2);o[0],o[1].loaded?n++:e=!1}else e=!1;return this.enableLoadingBar&&this.setLoadingBarProgress(n/t),e}},{key:"resizeCheck",value:function(){return!this.domElement.size.clone().equals(this.domElement.size.set(this.domElement.clientWidth,this.domElement.clientHeight))}},{key:"GameLoop",value:function(){var e=this;this.enableStats&&this.stats.begin(),requestAnimationFrame((function(){return e.GameLoop()})),this.resizeCheck()&&this._onResize(),this.renderScene(),this._update(),this.enableStats&&this.stats.end()}},{key:"updateCamera",value:function(){if(null!==this.cameraTransition&&this.cameraTransition.update(),null!==this.cameraTransition&&this.cameraTransition.ended&&(this.cameraTransition=null),this.enableControls&&this.controls.enabled)return this.cameraUp.copy(n.Object3D.DefaultUp),this.controls.target&&this._cameraLookAt.copy(this.controls.target),this._cameraPosition.copy(this.camera.position),this._cameraUp.copy(this.camera.up),void(this._cameraZoom=this.camera.zoom);var e=this.camera.position.equals(this.cameraPosition),t=this.camera.up.equals(this.cameraUp),i=this._cameraLookAt.equals(this.cameraLookAt),r=this.camera.zoom===this.cameraZoom;null!==this.cameraTransition||i&&t&&e&&r||this.addCameraTransition()}},{key:"addCameraTransition",value:function(){var e=this;this.camera.up.copy(n.Object3D.DefaultUp),this._cameraUp.copy(n.Object3D.DefaultUp),this.enableControls&&this.controls.enabled&&this.controls.target&&this._cameraLookAt.copy(this.controls.target);var t=this.camera.localToWorld(this._cameraUp.clone()).sub(this._cameraPosition);this._cameraUp.copy(t),this.camera.up.copy(t),this.cameraTransition=new _([new z(this,"_cameraPosition",{1:this.cameraPosition}),new z(this,"_cameraUp",{1:this.cameraUp}),new z(this,"_cameraLookAt",{1:this.cameraLookAt}),new z(this,"_cameraZoom",{1:this.cameraZoom})],{autoplay:!0,duration:this.cameraTransitionDuration,function:this.cameraTransitionFunction,callbackEveryUpdate:function(){e.camera.position.copy(e._cameraPosition),e.camera.up.copy(e._cameraUp),e.camera.lookAt(e._cameraLookAt),e.camera.zoom=e._cameraZoom,e.enableControls&&e.controls.target&&e.controls.target.copy(e._cameraLookAt),e.camera.updateProjectionMatrix()}})}},{key:"setCameraPosition",value:function(){this.cameraTransition=null,this.camera.position.copy(this.cameraPosition),this.camera.up.copy(this.cameraUp),this.camera.lookAt(this.cameraLookAt),this.camera.zoom=this.cameraZoom}},{key:"updateObjects",value:function(){var e,t=U(this.objectsToUpdate);try{for(t.s();!(e=t.n()).done;){var n,i=e.value,r=[];if(i.arguments){var o,a=U(i.arguments);try{for(a.s();!(o=a.n()).done;){var s=o.value;r.push(s.object[s.property])}}catch(e){a.e(e)}finally{a.f()}}void 0!==i.object.update&&(n=i.object).update.apply(n,r)}}catch(e){t.e(e)}finally{t.f()}}},{key:"clickableObjects",get:function(){var e=[];return this.scene&&this.scene.traverse((function(t){t.isClickable&&e.push(t)})),e.sort((function(e,t){return e.hoverDistance-t.hoverDistance}))}},{key:"handleClickableObjectsClick",value:function(e){var t=e.button;this.clickableObjects.reduce((function(e,n){return n.isPressed=n.isDragged=n.isHovered,n.isLeftClicked=0===t&&n.isHovered,n.isRightClicked=2===t&&n.isHovered,n.isWheelClicked=1===t&&n.isHovered,e?n.isLeftClicked=n.isRightClicked=n.isWheelClicked=n.isPressed=n.isDragged=!1:n.isHovered&&(n.isLeftClicked?n.isLeftClickNeedCallback=!0:n.isRightClicked?n.isRightClickNeedCallback=!0:n.isWheelClicked&&(n.isWheelClickNeedCallback=!0)),n.isHovered||e}),!1)}},{key:"handleClickableObjectsMouseUp",value:function(){this.clickableObjects.map((function(e){return e.isPressed=e.isDragged=!1}))}},{key:"updateClickableObjects",value:function(){var e,t=!1,n=U(this.clickableObjects);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=i.isHovered;if(i.isClickDisabled)i.isHovered=!1,i.isLeftClicked=i.isRightClicked=i.isWheelClicked=!1,i.isDragged=!1,i.isPressed=!1,i.isLeftClickNeedCallback=i.isRightClickNeedCallback=i.isWheelClickNeedCallback=!1;else{i.isLeftClickNeedCallback&&(i.isLeftClickNeedCallback=!1,i.onClick()),i.isRightClickNeedCallback&&(i.isRightClickNeedCallback=!1,i.onRightClick()),i.isWheelClickNeedCallback&&(i.isWheelClickNeedCallback=!1,i.onWheelClick());var o=void 0!==i.clickableObject?i.clickableObject:i;i.isHovered=!t&&o.hoverCheck(this.mouse,this.camera),i.isHovered?(r||i.onHover(),i.onHoverUpdate()):r&&i.onHoverEnd(),i.isHovered||(i.isPressed=!1),i.isHovered&&(t=!0)}}}catch(e){n.e(e)}finally{n.f()}t?window.cursorPointer():window.cursorArrow()}},{key:"_initLoaded",value:function(){this.DEV_MODE&&this.promptDebugInfo(),this.DEV_MODE&&this.addDebugGuiFields()}},{key:"_update",value:function(){this.loaded=this.assetsLoadedCheck();var e=1*window.devicePixelRatio.toFixed(5);getComputedStyle(document.documentElement).getPropertyValue("--DPR")!=e&&document.documentElement.style.setProperty("--DPR",e),this.enableLoadingCircle&&this.setLoadingCircleVisibility(!this.initedLoaded),this.enableLoadingBar&&this.setLoadingBarVisibility(!this.initedLoaded),this.updateCamera(),this.updateClickableObjects(),this.updateObjects(),this.update&&this.update(this),this.loaded&&!this.initedLoaded&&(this._initLoaded(),this.initLoaded&&this.initLoaded(this),this.initedLoaded=!0),this.initedLoaded&&this.updateLoaded&&this.renderInited&&this.updateLoaded(this),this.initedLoaded&&this.updateLoaded&&(this.renderInited=!0),this.hover&&this.hover(this),this.enableControls&&this.controls.update&&this.controls.update(),this.enablePostprocessing&&this.enableFXAA&&this.updateFxaaPass()}},{key:"renderScene",value:function(){this.enablePostprocessing?this.composer.render():this.renderer.render(this.scene,this.camera)}},{key:"addTestLights",value:function(){var e,t=-10,i=10,r=new n.Group,o=null===(e=this.gui)||void 0===e?void 0:e.addFolder("Lights");null==o||o.close();var a=new n.AmbientLight;a.intensity=.6235;var s=null==o?void 0:o.addFolder("AmbientLight"),l=new(function(){return q((function e(){Y(this,e)}))}());l._enabled=!0,l.__defineGetter__("enabled",(function(){return this._enabled||!1})),l.__defineSetter__("enabled",(function(e){this._enabled=e,e?r.add(a):a.removeFromParent()})),null==s||s.add(l,"enabled").listen(),null==s||s.add(a,"intensity").min(0).max(1).listen().setValue(.6235).step(5e-4),null==s||s.addColor(a,"color"),l.enabled=!0,null==s||s.close();var c=new n.DirectionalLight;c.intensity=.4,c.position.set(-8,-9,-10);var u=null==o?void 0:o.addFolder("DirectionalLight"),d=new(function(){return q((function e(){Y(this,e)}))}());d.__defineGetter__("enabled",(function(){return this._enabled||!1})),d.__defineSetter__("enabled",(function(e){this._enabled=e,e?r.add(c):c.removeFromParent()})),null==u||u.add(d,"enabled").listen(),null==u||u.add(c,"intensity").min(0).max(1).step(5e-4).listen().setValue(.4),null==u||u.addColor(c,"color"),null==u||u.add(c,"castShadow"),null==u||u.add(c.position,"x").min(t).max(i).step(5e-4).listen().setValue(-8),null==u||u.add(c.position,"y").min(t).max(i).step(5e-4).listen().setValue(-9),null==u||u.add(c.position,"z").min(t).max(i).step(5e-4).listen().setValue(-10),null==u||u.add(c.target.position,"x").min(t).max(i).name("target x").step(5e-4),null==u||u.add(c.target.position,"y").min(t).max(i).name("target y").step(5e-4),null==u||u.add(c.target.position,"z").min(t).max(i).name("target z").step(5e-4),null==u||u.close(),d.enabled=!0,r.add(c.target);var h=new n.HemisphereLight;h.intensity=1,h.color.set(1842204),h.groundColor.set(0);var m=null==o?void 0:o.addFolder("HemisphereLight"),p=new(function(){return q((function e(){Y(this,e)}))}());p.__defineGetter__("enabled",(function(){return this._enabled||!1})),p.__defineSetter__("enabled",(function(e){this._enabled=e,e?r.add(h):h.removeFromParent()})),null==m||m.add(p,"enabled").listen(),null==m||m.add(h,"intensity").min(0).max(1).step(5e-4).listen().setValue(1),null==m||m.addColor(h,"color").listen().setValue(new n.Color(1842204)),null==m||m.addColor(h,"groundColor").listen().setValue(new n.Color(0)),null==m||m.add(h.position,"x").min(-1).max(1).step(5e-4),null==m||m.add(h.position,"y").min(-1).max(1).step(5e-4),null==m||m.add(h.position,"z").min(-1).max(1).step(5e-4),null==m||m.close(),p.enabled=!0;var f=new n.PointLight;f.intensity=.4,f.distance=0,f.decay=1,f.position.set(8.95,10,10);var b=null==o?void 0:o.addFolder("PointLight"),y=new(function(){return q((function e(){Y(this,e)}))}());y.__defineGetter__("enabled",(function(){return this._enabled||!1})),y.__defineSetter__("enabled",(function(e){this._enabled=e,e?r.add(f):f.removeFromParent()})),null==b||b.add(y,"enabled").listen(),null==b||b.add(f,"intensity").min(0).max(1).step(5e-4).listen().setValue(.4),null==b||b.addColor(f,"color"),null==b||b.add(f,"castShadow"),null==b||b.add(f,"power").min(0).max(50).step(5e-4).listen(),null==b||b.add(f,"distance").min(0).max(10).step(5e-4).listen().setValue(0),null==b||b.add(f,"decay").min(0).max(10).step(5e-4).listen().setValue(1),null==b||b.add(f.position,"x").min(t).max(i).step(5e-4).listen().setValue(8.95),null==b||b.add(f.position,"y").min(t).max(i).step(5e-4).listen().setValue(10),null==b||b.add(f.position,"z").min(t).max(i).step(5e-4).listen().setValue(10),null==b||b.close(),y.enabled=!0;var g=new n.RectAreaLight,v=null==o?void 0:o.addFolder("RectAreaLight"),k=new(function(){return q((function e(){Y(this,e)}))}());k.__defineGetter__("enabled",(function(){return this._enabled||!1})),k.__defineSetter__("enabled",(function(e){this._enabled=e,e?r.add(g):g.removeFromParent()})),null==v||v.add(k,"enabled").listen(),null==v||v.add(g,"intensity").min(0).max(1).step(5e-4),null==v||v.addColor(g,"color"),null==v||v.add(g,"power").min(0).max(50).step(5e-4),null==v||v.add(g,"width").min(0).max(5).step(5e-4),null==v||v.add(g,"height").min(0).max(5).step(5e-4),null==v||v.add(g.position,"x").min(t).max(i).step(5e-4),null==v||v.add(g.position,"y").min(t).max(i).step(5e-4),null==v||v.add(g.position,"z").min(t).max(i).step(5e-4);var w=new n.Vector3;null==v||v.add(w,"x").min(t).max(i).step(5e-4).onChange((function(){return g.lookAt(w)})).name("lookAt x"),null==v||v.add(w,"y").min(t).max(i).step(5e-4).onChange((function(){return g.lookAt(w)})).name("lookAt y"),null==v||v.add(w,"z").min(t).max(i).step(5e-4).onChange((function(){return g.lookAt(w)})).name("lookAt z"),null==v||v.close();var C=new n.SpotLight,P=null==o?void 0:o.addFolder("SpotLight"),O=new(function(){return q((function e(){Y(this,e)}))}());return O.__defineGetter__("enabled",(function(){return this._enabled||!1})),O.__defineSetter__("enabled",(function(e){this._enabled=e,e?r.add(C):C.removeFromParent()})),null==P||P.add(O,"enabled").listen(),null==P||P.add(C,"intensity").min(0).max(1).step(5e-4),null==P||P.addColor(C,"color"),null==P||P.add(C,"castShadow"),null==P||P.add(C,"power").min(0).max(50).step(5e-4),null==P||P.add(C,"distance").min(0).max(10).step(5e-4),null==P||P.add(C,"decay").min(0).max(10).step(5e-4),null==P||P.add(C,"angle").min(0).max(Math.PI/2).step(5e-4),null==P||P.add(C,"penumbra").min(0).max(1).step(5e-4),null==P||P.add(C.position,"x").min(t).max(i).step(5e-4),null==P||P.add(C.position,"y").min(t).max(i).step(5e-4),null==P||P.add(C.position,"z").min(t).max(i).step(5e-4),null==P||P.add(C.target.position,"x").min(t).max(i).name("target x").step(5e-4),null==P||P.add(C.target.position,"y").min(t).max(i).name("target y").step(5e-4),null==P||P.add(C.target.position,"z").min(t).max(i).name("target z").step(5e-4),null==P||P.close(),r.add(C.target),this.scene.add(r),r}},{key:"requestFullscreen",value:function(){if(window.mobileCheck()&&!window.isIOS)try{document.fullscreenElement||document.documentElement.requestFullscreen()}catch(e){}}},{key:"addEventListeners",value:function(){var e=this;this.domElement.addEventListener("mousemove",(function(t){e.enableControls&&e.controls.enabled&&e.isMouseDown&&(e.cameraTransition=null),e._onMouseMove(t,e),e.onMouseMove&&e.onMouseMove(t,e)})),this.domElement.addEventListener("mousedown",(function(t){e.enableControls&&e.controls.enabled&&(e.cameraTransition=null),e.enableControls&&"pointerlock"===e.controlsType&&e.controls.lock(),e.isMouseDown=!0,e.onMouseDown&&e.onMouseDown(t,e),e.handleClickableObjectsClick(t),e.enableAutoFullscreenOnMobile&&e.requestFullscreen()}),!1),this.domElement.addEventListener("mouseup",(function(t){e.isMouseDown=!1,e.onMouseUp&&e.onMouseUp(t,e),e.handleClickableObjectsMouseUp()})),this.domElement.addEventListener("touchstart",(function(t){e.enableControls&&e.controls.enabled&&(e.cameraTransition=null),t.touches&&t.touches.length>0&&e._onMouseMove({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),e.onTouchStart&&e.onTouchStart(t,e,e.lastTouch),t.touches&&t.touches.length>0&&(e.lastTouch=t.touches[0]),e.enableAutoFullscreenOnMobile&&e.requestFullscreen()})),this.domElement.addEventListener("touchmove",(function(t){t.touches&&t.touches.length>0&&e._onMouseMove({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),e.onTouchMove&&e.onTouchMove(t,e,e.lastTouch),t.touches&&t.touches.length>0&&(e.lastTouch=t.touches[0])})),this.domElement.addEventListener("touchend",(function(t){e.onTouchEnd&&e.onTouchEnd(t,e,e.lastTouch),t.touches&&t.touches.length>0&&(e.lastTouch=t.touches[0])})),this.domElement.addEventListener("wheel",(function(t){e.enableControls&&e.controls.enabled&&(e.cameraTransition=null),e.onWheel&&e.onWheel(t,e)})),this.domElement.addEventListener("scroll",(function(t){e.onScroll&&e.onScroll(t,e)})),this.domElement.addEventListener("keydown",(function(t){e.onKeydown&&e.onKeydown(t,e)})),this.disableContextMenu&&this.domElement.addEventListener("contextmenu",(function(e){return e.preventDefault()}))}},{key:"_onResize",value:function(){this.renderer.setPixelRatio(window.devicePixelRatio),this.enablePostprocessing&&this.composer.setPixelRatio(window.devicePixelRatio);var e=this.domElement.clientWidth,t=this.domElement.clientHeight;if(this.renderer.setSize(e,t),this.enablePostprocessing&&this.composer.setSize(e,t),this.camera.aspect=e/t,this.camera.isOrthographicCamera){var n=this.calculateOrtographicCameraSize();this.camera.left=-n.x/2,this.camera.right=n.x/2,this.camera.top=n.y/2,this.camera.bottom=-n.y/2}this.camera.updateProjectionMatrix()}},{key:"_onMouseMove",value:function(e){this.mouseLast=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.mouse),this.mouse.x=(e.clientX-this.domElement.getBoundingClientRect().left)/this.domElement.clientWidth*2-1,this.mouse.y=-(e.clientY-this.domElement.getBoundingClientRect().top)/this.domElement.clientHeight*2+1}},{key:"promptDebugInfo",value:function(){for(var e={},t=0,i=Object.entries(this.renderer.capabilities);t<i.length;t++){var r=W(i[t],2),o=r[0],a=r[1];e[o]=a instanceof Function?a():a}console.log("three.js version: "+n.REVISION),console.log("renderer capabilities",e)}},{key:"randomCameraPosition",value:function(){this.cameraTransition=null,this.cameraLookAt.set(Math.random()-.5,Math.random()-.5,Math.random()-.5),this.cameraPosition.set(10*(Math.random()-.5),10*(Math.random()-.5),10*(Math.random()-.5)),this.cameraUp.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),this.cameraZoom=Math.random()+1}},{key:"addDebugGuiFields",value:function(){var e,t=this,n=null===(e=this.gui)||void 0===e?void 0:e.addFolder("Debug");n.add({promptRendererInfo:function(){return console.log(t.renderer.info)}},"promptRendererInfo").name("Prompt renderer info"),n.add(this,"addCameraTransition").name("Add camera transition"),n.add(this,"setCameraPosition").name("Set camera position"),n.add(this.controls,"enabled").listen().name("Controls enabled").listen(),n.close()}}]),e}();!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ultra:14580,high:10240,medium:7290,low:4860,"very-low":2048},t=new n.WebGLRenderer;K.prototype.maxTextureSize=t.capabilities.maxTextureSize,K.prototype.maxTextures=t.capabilities.maxTextures;for(var i="very-low",r=0,o=Object.entries(e);r<o.length;r++){var a=W(o[r],2),s=a[0],l=a[1];l>e[K.textureQuality]&&l<=K.maxTextureSize&&(i=s)}window.mobileCheck()&&(i="very-low"),K.prototype.textureQuality=i}();const Q=K;self["three-engine"]=t})();